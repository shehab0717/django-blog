{% extends 'shared/_layout.html' %}

{% block title %}Post - {{post.title}}{% endblock title %}
{% load crispy_forms_tags %}
{% block content %}
<div class="m-auto w-50 pt-5">
    <div class="d-flex flex-row-reverse mb-3">
        <a class="btn btn-link text-danger" href="/post/delete/{{post.id}}">Delete</a>
        <a class="btn btn-warning" href="/post/update/{{post.id}}">Update</a>
    </div>
    <div class=" rounded overflow-hidden">
        <img class="w-100" src="/media/{{ post.image }}"/>
    </div>
    <div class="d-flex justify-content-between p-3 bg-dark text-light rounded">
        <div>{{post.created_at}}</div>
        <div>
            <span>{{likes.count}} Likes - </span>
            <span>{{dislikes.count}} Dislikes</span>
        </div>
    </div>
    <div class="bg-light p-3">
        <h5 class="my-3">{{post.title}}</h5>
        <p>{{post.content}}</p>
    </div>
    <div class="d-flex flex-row-reverse bg-primary">
        <div class="d-inline-block">
            <form method="post">
                {% csrf_token %}
                <button class="btn btn-link text-light" type="submit" name='reaction' value="like">Like</button>
            </form>
        </div>
        <div class="d-inline-block">
            <form method="post">
                {% csrf_token %}
                <button class="btn btn-link text-light" type="submit" name='reaction' value="dislike">Dislike</button>
            </form>
        </div>
    </div>
    <div class="p-3 bg-secondary text-light">
        <h5>Add comment</h5>
        <form method="post">
            {% csrf_token %}
            {{commentForm|crispy}}
            <input class="btn btn-warning" type="submit" value="Comment">
        </form>
    </div>
    <div class="p-3 bg-secondary text-light">
        <h5>Comments</h5>
        {% for comment in comments %}
        <div class="bg-light text-dark my-3 p-3 rounded">
            <p class="fs-5 fw-semibold">{{comment.text}}</p>
            <div class="d-flex justify-content-between text-secondary">
                <div>@{{comment.author_id}}</div>
                <div>{{comment.created_at}}</div>
            </div>
        </div>
        {% empty %}
        <p>No comments</p>
        {% endfor %}
    </div>
</div>
{% endblock content %}